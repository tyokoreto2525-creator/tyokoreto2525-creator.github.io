<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Midorimushi Portfolio</title>
  <link rel="stylesheet" href="css/style.css" />

  <style>
/* ギャラリー内の画像を中央寄せ */
.gallery-images figure {
  margin: 0 0 1rem;   /* 下だけ余白、左右は0でOK */
}

.gallery-images img {
  display: block;
  margin: 0 auto;     /* 画像を左右中央に */
}


    /* 画像拡大ライトボックス */
    .image-lightbox {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.85);
      z-index: 9999;
    }
    .image-lightbox.is-open { display: flex; }
    .image-lightbox-inner {
      position: relative;
      max-width: 90vw;
      max-height: 90vh;
      padding: 12px;
      background: #000;
      border-radius: 8px;
      overflow: auto;
    }
    .image-lightbox-inner img {
      display: block;
      max-width: 100%;
      height: auto;
    }
    .image-lightbox-close {
      position: absolute;
      top: 8px;
      right: 8px;
      padding: 4px 10px;
      border: none;
      border-radius: 4px;
      background: #ff4f8a;
      color: #fff;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .image-lightbox-caption {
      margin-top: 6px;
      text-align: center;
      color: #f5f5f5;
      font-size: 0.9rem;
    }

    /* モーダル本体（PC・スマホ共通） */
    .gallery-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9000;
    }
    .gallery-modal.is-open { display: flex; }

    .gallery-inner {
      position: relative;
      max-width: 1000px;
      max-height: 90vh;
      padding: 16px;
      background: rgba(0,0,0,0.9);
      border-radius: 10px;
      box-sizing: border-box;
      overflow-y: auto;

      /* 下に閉じるボタンを固定したいので縦flex */
      display: flex;
      flex-direction: column;
      padding-bottom: 64px; /* ボタン分の余白 */
    }

    /* 一番下の✕閉じるボタン（PC/スマホ共通） */
    .gallery-close {
      position: sticky;
      bottom: 12px;
      align-self: center;

      margin-top: 20px;
      padding: 8px 18px;
      border-radius: 999px;
      border: none;
      background: #ff4f8a;
      color: #fff;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: bold;
    }

    /* テキスト一覧用 */
    .text-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
    }
    .text-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 8px;
      background: rgba(0,0,0,0.7);
      padding: 10px 12px;
      border-radius: 6px;
      color: #f8f8f8;
    }
    .text-row-title {
      flex: 1 1 auto;
      font-size: 0.95rem;
    }
    .text-row button {
      flex: 0 0 auto;
      border: none;
      border-radius: 4px;
      padding: 6px 10px;
      cursor: pointer;
      font-size: 0.85rem;
      background: #ff4f8a;
      color: #fff;
    }
    .text-body {
      display: none;
      margin-top: 8px;
      padding: 10px 12px;
      border-radius: 6px;
      background: rgba(0,0,0,0.85);
      color: #f8f8f8;
      font-size: 0.9rem;
      line-height: 1.6;
      white-space: normal;
    }
    .text-body.is-open { display: block; }
    /* ギャラリー共通：画像を中央寄せ */
    .gallery-images {
      display: flex;
      flex-wrap: wrap;       /* 横に並ぶのもOK */
      justify-content: center; /* 全体を中央寄せ */
      gap: 24px;             /* 図と図の間のすき間 */
      text-align: center;    /* キャプション文字を中央 */
    }
    /* スマホ用調整 */
    @media (max-width: 768px) {
      .overlay-gallery {
        position: static;
        transform: none;
        margin: 12px auto 20px;
        max-width: 94vw;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .art-card { width: 100%; }
      .gallery-inner {
        width: 96vw;
        max-height: 88vh;
      }
    }


  </style>
</head>
<body>
<header class="container">
  <h1>ちょこっとチョコレート / Portfolio(テスト)</h1>
  <nav class="nav">
    <a href="#contact">お問い合わせ</a>
  </nav>
</header>

<main class="container">
  <h2>Chocolate Mint</h2>

        <!-- 作品1：画像 -->
        <div class="art-card bg-01">
          <div class="art-content">
            <h3>画像</h3>
            <div class="caption-container">
              <button
                class="toggle-button open-gallery"
                type="button"
                data-gallery="gallery-01">
                ▼ 詳細を見る
              </button>
              <p id="cap-01" class="caption"></p>
            </div>
          </div>
        </div>

        <!-- 作品2：動画 -->
        <div class="art-card bg-02">
          <div class="art-content">
            <h3>音楽</h3>
            <div class="caption-container">
              <button
                class="toggle-button open-gallery"
                type="button"
                data-gallery="gallery-02">
                ▼ 詳細を見る
              </button>
              <p id="cap-02" class="caption"></p>
            </div>
          </div>
        </div>

        <!-- 作品3：ブログ -->
        <div class="art-card bg-03">
          <div class="art-content">
            <h3>ブログ</h3>
            <div class="caption-container">
              <button
                class="toggle-button open-gallery"
                type="button"
                data-gallery="gallery-03">
                ▼ 詳細を見る
              </button>
              <p id="cap-03" class="caption"></p>
            </div>
          </div>
        </div>

        <!-- 作品4：その他 -->
        <div class="art-card bg-04">
          <div class="art-content">
            <h3>その他</h3>
            <div class="caption-container">
              <button
                class="toggle-button open-gallery"
                type="button"
                data-gallery="gallery-04">
                ▼ 詳細を見る
              </button>
              <p id="cap-04" class="caption"></p>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

   <!-- ギャラリー1：画像一覧＋ジャンル別 -->
  <div id="gallery-01" class="gallery-modal" aria-hidden="true">
    <div class="gallery-inner">

      <!-- ===== 画像ジャンル1 ===== -->
      <hr style="margin:16px 0;border:none;border-top:1px solid #555;" />
      <h3 style="margin:0 0 4px;color:#fff;">銅版画風イラスト</h3>
      <p style="margin:0 0 12px;font-size:0.9rem;color:#ddd;">
        ※画像クリックでダウンロード、「拡大」で大きく表示されます。
      </p>
      <hr style="margin:0 0 16px;border:none;border-top:1px solid #555;" />

      <!-- ここが今までの11枚そのまま -->
      <div class="gallery-images">

        <!-- 1 -->
        <figure>
          <a href="../assets/E01.webp" download>
            <img src="../assets/E01.webp" alt="黄昏の祈り">
          </a>
          <figcaption>黄昏の祈り</figcaption>
          <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- 2 -->
        <figure>
          <a href="../assets/E02.webp" download>
            <img src="../assets/E02.webp" alt="碧雫のマーメイド">
          </a>
          <figcaption>碧雫のマーメイド</figcaption>
          <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- 3 -->
        <figure>
          <a href="../assets/E03.webp" download>
            <img src="../assets/E03.webp" alt="森に囁く少女">
          </a>
          <figcaption>森に囁く少女</figcaption>
          <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- 4 -->
        <figure>
          <a href="../assets/E04.webp" download>
            <img src="../assets/E04.webp" alt="水色リボンの微笑み">
          </a>
          <figcaption>水色リボンの微笑み</figcaption>
          <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- 5 -->
        <figure>
          <a href="../assets/E05.webp" download>
            <img src="../assets/E05.webp" alt="内緒話の放課後">
          </a>
          <figcaption>内緒話の放課後</figcaption>
          <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- 6 -->
        <figure>
          <a href="../assets/E06.webp" download>
            <img src="../assets/E06.webp" alt="紫煙のオラクル">
          </a>
          <figcaption>紫煙のオラクル</figcaption>
          <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- 7 -->
        <figure>
          <a href="../assets/E07.webp" download>
            <img src="../assets/E07.webp" alt="春待ちの横顔">
          </a>
          <figcaption>春待ちの横顔</figcaption>
          <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- 8 -->
        <figure>
          <a href="../assets/E08.webp" download>
            <img src="../assets/E08.webp" alt="照れ隠しのマーメイド">
          </a>
          <figcaption>照れ隠しのマーメイド</figcaption>
          <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- 9 -->
        <figure>
          <a href="../assets/E09.webp" download>
            <img src="../assets/E09.webp" alt="雪花のドレス">
          </a>
          <figcaption>雪花のドレス</figcaption>
          <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- 10 -->
        <figure>
          <a href="../assets/E10.webp" download>
            <img src="../assets/E10.webp" alt="雨上がりのまなざし">
          </a>
          <figcaption>雨上がりのまなざし</figcaption>
          <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- 11 -->
        <figure>
          <a href="../assets/E11.webp" download>
            <img src="../assets/E11.webp" alt="紅き黒兎の晩餐">
          </a>
          <figcaption>紅き黒兎の晩餐</figcaption>
          <button type="button" class="enlarge-btn">拡大</button>
        </figure>

      </div>

      <!-- ===== 画像ジャンル2 ===== -->
      <hr style="margin:24px 0 16px;border:none;border-top:1px solid #555;" />
      <h3 style="margin:0 0 8px;color:#fff;">QRコード画像</h3>
           <p style="margin:0 0 12px;font-size:0.9rem;color:#ddd;">
        ※画像クリックでダウンロード、「拡大」で大きく表示されます。※画像のQRコードは読み込めます。
      </p>
      <hr style="margin:0 0 16px;border:none;border-top:1px solid #555;" />

      <div class="gallery-images">

        <!-- ジャンル1 -->
        <figure>
          <a href="../assets/qranime.webp" download>
            <img src="../assets/qranime.webp" alt="ジャンル1">
          </a>
          <figcaption>アニソン</figcaption>
          <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- ジャンル2 -->
        <figure>
          <a href="../assets/qrproseka.webp" download>
            <img src="../assets/qrproseka.webp" alt="ジャンル2">
          </a>
          <figcaption>プロセカ</figcaption>
               <button type="button" class="enlarge-btn">拡大</button>
        </figure>
        <!-- ジャンル3 -->
        <figure>
          <a href="../assets/qrgemu.web" download>
            <img src="../assets/qrgemu.webp" alt="ジャンル3">
          </a>
          <figcaption>ゲームソング</figcaption>
           <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- ジャンル4 -->
        <figure>
          <a href="../assets/qrnounai.webp" download>
            <img src="../assets/qrnounai.webp" alt="ジャンル4">
          </a>
          <figcaption>脳内リセット</figcaption>
             <button type="button" class="enlarge-btn">拡大</button>
        </figure>

        <!-- ジャンル5 -->
        <figure>
          <a href="../assets/touhou.webp" download>
            <img src="../assets/touhou.webp" alt="ジャンル5">
          </a>
          <figcaption>ScarletFuror</figcaption>
            <button type="button" class="enlarge-btn">拡大</button>
        </figure>

      </div>

    

      <button class="gallery-close" type="button">✕ 閉じる</button>
    </div>
  </div>




  <!-- 画像拡大ライトボックス -->
  <div id="image-lightbox" class="image-lightbox" aria-hidden="true">
    <div class="image-lightbox-inner">
      <button class="image-lightbox-close" type="button">✕ 閉じる</button>
      <img id="lightbox-img" src="" alt="">
      <p id="lightbox-caption" class="image-lightbox-caption"></p>
    </div>
  </div>
  
  
   <!-- ギャラリー2：音楽 -->
  <div id="gallery-02" class="gallery-modal" aria-hidden="true">
    <div class="gallery-inner">
      <div class="gallery-images">

        <!-- ① 音楽素材ページへのリンク（サムネ） -->
        <figure>
          ...


        <!-- ① 音楽素材ページへのリンク（サムネ） -->
        <figure>
          <!-- 音楽素材ページへのリンク先 -->
<a href="https://tyokoreto2525-creator.github.io/blog/music.html"
   target="_blank"
   rel="noopener noreferrer">



             <hr style="margin:24px 0 16px;border:none;border-top:1px solid #555;" />
      <h3 style="margin:0 0 8px;color:#fff;">音楽素材</h3>
           <p style="margin:0 0 12px;font-size:0.9rem;color:#ddd;">
※画像クリックで音楽素材のページへ移動
      </p>
      <hr style="margin:0 0 16px;border:none;border-top:1px solid #555;" />
            
            <!-- サムネ画像（好きな画像に差し替えOK） -->
            <img src="../assets/E01.webp" alt="音楽素材ページへ" />
          </a>
          <figcaption>音楽素材ページへ</figcaption>
    
        </figure>

        <!-- ② ここから下は .mp3 を直接開く／DLさせる例 -->
      <hr style="margin:24px 0 16px;border:none;border-top:1px solid #555;" />
      <h3 style="margin:0 0 8px;color:#fff;">BGM素材</h3>
           <p style="margin:0 0 12px;font-size:0.9rem;color:#ddd;">
※画像クリックでBGM素材ダウンロードのページへ移動
      </p>
      <hr style="margin:0 0 16px;border:none;border-top:1px solid #555;" />
            
        <figure>
          <!-- 任意の music フォルダ内 mp3 に変更 -->
          <a href="https://drive.google.com/file/d/1oAb2uPr1Blb_r-H8kafBFeBcbR1Zl2wU/view?usp=drive_link"target="_blank"
   rel="noopener noreferrer"download>
            <img src="../assets/A.webp" alt="曲タイトル1" />
          </a>
          <figcaption>ゴシックシンフォニック/ダークファンタジー・バロック/メランコリック・ドラマティックロック／バラード</figcaption>
        </figure>

        <figure>
          <a href="https://drive.google.com/file/d/1gZjvF4KuAZAjxF-AC6Yw-mdSZtWlPB_5/view?usp=drive_link"target="_blank"
   rel="noopener noreferrer"
   download>
            <img src="../assets/B.webp" alt="曲タイトル2" />
          </a>
          <figcaption>メロディック・スピード/メタルネオクラシカル・メタル/ネオクラシカル・メタル</figcaption>
        </figure>

        <figure>
          <a href="https://drive.google.com/file/d/1Qj9r3PYaV6DdWroOnLdbHzdtWuLOsVms/view?usp=drive_link"target="_blank"
   rel="noopener noreferrer"
   download>
            <img src="../assets/C.webp"" alt="曲タイトル3" />
          </a>
          <figcaption>ユーロビート・NRG/ロック・ユーロアレンジ/シンセ・ロック・ポップ</figcaption>
        </figure>


         <figure>
          <a href="https://drive.google.com/file/d/16oA8d-I3kqGwqT_OJHv2IIu92RjYiyJB/view?usp=drive_link"target="_blank"
   rel="noopener noreferrer"
   download>
            <img src="../assets/D.webp" alt="曲タイトル2" />
          </a>
          <figcaption>ゴシック・クラシカル /神秘・宗教幻想/ドラマティック・エモーショナル</figcaption>
        </figure>


         <figure>
          <a href="https://drive.google.com/file/d/1gSviPmaNmUilNjjborthFz4wut_Qt46K/view?usp=drive_link"target="_blank"
   rel="noopener noreferrer"
   download>
            <img src="../assets/E.webp" alt="曲タイトル2" />
          </a>
          <figcaption>ダーク・サイバーテクノ/インダストリアル・エレクトロ/アシッド・リチュアルビート</figcaption>
        </figure>

        

      </div>

      <button class="gallery-close" type="button">✕ 閉じる</button>
    </div>
  </div>


  <!-- ギャラリー3：ブログ -->
  <div id="gallery-03" class="gallery-modal" aria-hidden="true">
    <div class="gallery-inner">

      <h3 style="margin:0 0 8px;color:#fff;">ブログ一覧</h3>
      <hr style="margin:0 0 16px;border:none;border-top:1px solid #555;" />

      <!--   Android-->
      <h4 style="margin:16px 0 4px;color:#fff;">Android</h4>
      <p>・
        <a href="https://tyokoreto2525-creator.github.io/blog/blog01.html" target="_blank" rel="noopener noreferrer">
         GrapheneOS の導入
        </a>
      </p>
      <p>・
        <a href="https://tyokoreto2525-creator.github.io/blog/blog05.html" target="_blank" rel="noopener noreferrer">
          端末の種類と選び方
        </a>
      </p>

      <hr style="margin:16px 0;border:none;border-top:1px solid #555;" />

      <!-- Windows -->
      <h4 style="margin:16px 0 4px;color:#fff;">Windows</h4>
      <p>・
        <a href="https://tyokoreto2525-creator.github.io/blog/blog02.html" target="_blank" rel="noopener noreferrer">
          Windowsパソコンの選び方
        </a>
      </p>
      <p>・
        <a href="https://tyokoreto2525-creator.github.io/blog/blog03.html" target="_blank" rel="noopener noreferrer">
         Windows 最適化設定
        </a>
      </p>
 <hr style="margin:16px 0;border:none;border-top:1px solid #555;" />

   <!-- 総合セキュリティ -->
      <h4 style="margin:16px 0 4px;color:#fff;">総合セキュリティ</h4>
      <p>・
        <a href="https://tyokoreto2525-creator.github.io/blog/blog04.html" target="_blank" rel="noopener noreferrer">
          デジタル総合セキュリティ

        </a>
      </p>


      
      <hr style="margin:16px 0;border:none;border-top:1px solid #555;" />

      <button class="gallery-close" type="button">✕ 閉じる</button>
    </div>
  </div>

   <!-- ギャラリー4：その他（タイトル／内容を見る） -->
  <div id="gallery-04" class="gallery-modal" aria-hidden="true">
    <div class="gallery-inner">

      <!-- ===== ジャンル1：安全通信環境の総合設計 ===== -->
      <hr style="margin:0 0 12px;border:none;border-top:1px solid #555;" />
      <h3 style="margin:0 0 12px;color:#fff;">安全通信環境の総合設計</h3>
      <hr style="margin:0 0 12px;border:none;border-top:1px solid #555;" />

      <div class="text-list">

        <!-- 1つ目：通信端末の分離と使い捨て設計 -->
        <div>
          <div class="text-row">
            <span class="text-row-title">1.物理的痕跡の完全排除</span>
            <button
              type="button"
              class="text-toggle-btn js-load-article"
              data-src="../tyokominto/tokumei1.html"
              data-target="text-01">
              内容を見る
            </button>
          </div>
          <div id="text-01" class="text-body"></div>
        </div>

        <div>
          <div class="text-row">
            <span class="text-row-title">2.Tails OSの運用</span>
            <button
              type="button"
              class="text-toggle-btn js-load-article"
              data-src="../tyokominto/tokumei2.html"
              data-target="text-02">
              内容を見る
            </button>
          </div>
          <div id="text-02" class="text-body"></div>
        </div>

        <div>
          <div class="text-row">
            <span class="text-row-title">3.通信経路の物理的分離</span>
            <button
              type="button"
              class="text-toggle-btn js-load-article"
              data-src="../tyokominto/tokumei3.html"
              data-target="text-03">
              内容を見る
            </button>
          </div>
          <div id="text-03" class="text-body"></div>
        </div>

        <div>
          <div class="text-row">
            <span class="text-row-title">4. 匿名通信の実践</span>
            <button
              type="button"
              class="text-toggle-btn js-load-article"
              data-src="../tyokominto/tokumei4.html"
              data-target="text-04">
              内容を見る
            </button>
          </div>
          <div id="text-04" class="text-body"></div>
        </div>

        <div>
          <div class="text-row">
            <span class="text-row-title">5.オペレーショナル・セキュリティ</span>
            <button
              type="button"
              class="text-toggle-btn js-load-article"
              data-src="../tyokominto/tokumei5.html"
              data-target="text-05">
              内容を見る
            </button>
          </div>
          <div id="text-05" class="text-body"></div>
        </div>

        <div>
          <div class="text-row">
            <span class="text-row-title">6.まとめ</span>
            <button
              type="button"
              class="text-toggle-btn js-load-article"
              data-src="../tyokominto/tokumei6.html"
              data-target="text-06">
              内容を見る
            </button>
          </div>
          <div id="text-06" class="text-body"></div>
        </div>

      </div><!-- /.text-list -->

      <!-- 6.まとめ の下に線 -->
      <hr style="margin:16px 0;border:none;border-top:1px solid #555;" />

      <!-- ===== ジャンル2：危険な食品 ===== -->
      <h3 style="margin:0 0 12px;color:#fff;">危険な食品</h3>
      <hr style="margin:0 0 12px;border:none;border-top:1px solid #555;" />

      <div class="text-list">

        <div>
          <div class="text-row">
            <span class="text-row-title">1.危険な食品の基礎知識</span>
            <button
              type="button"
              class="text-toggle-btn js-load-article"
              data-src="../tyokominto/mizika01.html"
              data-target="food-01">
              内容を見る
            </button>
          </div>
          <div id="food-01" class="text-body"></div>
        </div>

        <div>
          <div class="text-row">
            <span class="text-row-title">2.添加物・加工食品</span>
            <button
              type="button"
              class="text-toggle-btn js-load-article"
              data-src="food2.html"
              data-target="food-02">
              内容を見る
            </button>
          </div>
          <div id="food-02" class="text-body"></div>
        </div>

        <div>
          <div class="text-row">
            <span class="text-row-title">3.保存・調理とリスク低減</span>
            <button
              type="button"
              class="text-toggle-btn js-load-article"
              data-src="food3.html"
              data-target="food-03">
              内容を見る
            </button>
          </div>
          <div id="food-03" class="text-body"></div>
        </div>

      </div><!-- /.text-list（危険な食品） -->

      <button class="gallery-close" type="button">✕ 閉じる</button>
    </div>
  </div>


      


    
      </main>

<!-- フッターナビ -->
<div class="fixed-footer-nav" style="display:flex;flex-wrap:nowrap;justify-content:center;max-width:95vw;gap:16px">
  <a href="../index.html" style="white-space:nowrap;flex:0 0 auto;min-width:90px;max-width:140px;overflow:hidden;text-overflow:ellipsis;">トップページ</a>
  <a href="blog/music.html" style="white-space:nowrap;flex:0 0 auto;min-width:90px;max-width:140px;overflow:hidden;text-overflow:ellipsis;">音楽素材</a>
  <a href="blog/blog00.html" style="white-space:nowrap;flex:0 0 auto;min-width:90px;max-width:140px;overflow:hidden;text-overflow:ellipsis;">ブログ</a>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {

    // ▼ 詳細を見る → モーダルを開く
    document.querySelectorAll('.open-gallery').forEach(function (btn) {
      btn.addEventListener('click', function () {
        const id = btn.getAttribute('data-gallery');
        const modal = document.getElementById(id);
        if (modal) {
          modal.classList.add('is-open');
          modal.setAttribute('aria-hidden', 'false');
        }
      });
    });

    // モーダルを閉じるときに共通で呼ぶ：中のテキストも全部閉じる
    function closeModal(modal) {
      if (!modal) return;
      modal.classList.remove('is-open');
      modal.setAttribute('aria-hidden', 'true');

      // このモーダル内の「内容を見る」全部リセット
      modal.querySelectorAll('.text-body').forEach(function (box) {
        box.classList.remove('is-open');
        box.style.display = 'none';
      });
      modal.querySelectorAll('.text-toggle-btn').forEach(function (btn) {
        btn.textContent = '内容を見る';
      });
    }

    // ✕閉じる ＋ 背景クリックで閉じる
    document.querySelectorAll('.gallery-modal').forEach(function (modal) {
      const closeBtn = modal.querySelector('.gallery-close');
      if (closeBtn) {
        closeBtn.addEventListener('click', function () {
          closeModal(modal);
        });
      }
      modal.addEventListener('click', function (e) {
        if (e.target === modal) {
          closeModal(modal);
        }
      });
    });

    // ESCキーで全部閉じる
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape') {
        document.querySelectorAll('.gallery-modal.is-open').forEach(function (modal) {
          closeModal(modal);
        });
        const lb = document.getElementById('image-lightbox');
        if (lb) {
          lb.classList.remove('is-open');
          lb.setAttribute('aria-hidden', 'true');
        }
      }
    });

    // 画像拡大ライトボックス
    const lightbox = document.getElementById('image-lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const lightboxCaption = document.getElementById('lightbox-caption');

    if (lightbox && lightboxImg && lightboxCaption) {
      document.querySelectorAll('#gallery-01 figure').forEach(function (fig) {
        const btn = fig.querySelector('.enlarge-btn');
        const img = fig.querySelector('img');
        const cap = fig.querySelector('figcaption');
        if (!btn || !img) return;

        btn.addEventListener('click', function () {
          lightboxImg.src = img.src;
          lightboxImg.alt = img.alt || '';
          lightboxCaption.textContent = cap ? cap.textContent : (img.alt || '');
          lightbox.classList.add('is-open');
          lightbox.setAttribute('aria-hidden', 'false');
        });
      });

      const lbClose = document.querySelector('.image-lightbox-close');
      if (lbClose) {
        lbClose.addEventListener('click', function () {
          lightbox.classList.remove('is-open');
          lightbox.setAttribute('aria-hidden', 'true');
        });
      }
      lightbox.addEventListener('click', function (e) {
        if (e.target === lightbox) {
          lightbox.classList.remove('is-open');
          lightbox.setAttribute('aria-hidden', 'true');
        }
      });
    }

    // 「内容を見る」ボタンで別HTMLを読み込み＆開閉
    document.querySelectorAll('.js-load-article').forEach(function(btn){
      btn.addEventListener('click', async function(){
        const src      = btn.dataset.src;
        const targetId = btn.dataset.target;
        const box      = document.getElementById(targetId);
        if (!box) return;

        try {
          // まだロードしてなければ1回だけ fetch
          if (!box.dataset.loaded) {
            const res  = await fetch(src);
            const html = await res.text();
            box.innerHTML      = html;
            box.dataset.loaded = '1';
          }

          const isOpen = box.classList.toggle('is-open');
          box.style.display = isOpen ? 'block' : 'none';
          btn.textContent   = isOpen ? '閉じる' : '内容を見る';
        } catch(e) {
          console.error(e);
          box.style.display = 'block';
          box.textContent = '読み込みに失敗しました…';
        }
      });
    });

  });
</script>

</body>
</html>





